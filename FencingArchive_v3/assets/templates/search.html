<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title></title>
    
    <link href="http://v3.fencingarchive.net/assets/bootstrap/bootstrap-3.1.1-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://v3.fencingarchive.net/assets/style/teamgb.css" rel="stylesheet">
    <link href="http://v3.fencingarchive.net/assets/socicon/socicon.css" rel="stylesheet">
    
	<script src="http://v3.fencingarchive.net/assets/jquery/js/jquery-1.11.0.min.js"></script>
	<script src="http://v3.fencingarchive.net/assets/bootstrap/bootstrap-3.1.1-dist/js/bootstrap.min.js"></script>
    <script src="//d3js.org/d3.v3.min.js"></script>
</head>

<body role="document">

    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">FencingArchive</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
          <form class="navbar-form navbar-right" role="form">
            <div class="form-group">
              <input type="text" placeholder="Search" class="form-control">
            </div>
            <button type="submit" class="btn btn-success">Go!</button>
          </form>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    
    <div class="container theme-showcase" role="main" id="searchResults">

      <div class="page-header">
        <h1><span id="name"><!-- Competition Name --></span><span id="popularity"></span></h1>
      </div>
      <div class="row">
      	<div class="col-sm-12">
      	Search took...
      	</div>
      </div>
      <div class="row">
        <div class="col-sm-3">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">About</h3>
            </div>
            <div class="panel-body">
              <ul class="unstyled-list" id="about"><!-- Club List --></ul>
            </div>
          </div>
        </div><!-- /.col-sm-4 -->
        <div class="col-sm-9">
          <ul class="list-group" id="competition-results"><!-- Competition Results -->
          </ul>
		</div>
      </div>
    </div> <!-- /container -->


  <div id="name"></div>
    <script>
	  $.ajax({
	    type: "GET",
		url: "http://api.fencingarchive.net/search/{{ term }}"
	  }).done( function(json){
		var jsonObject = $.parseJSON(json);
		console.log(jsonObject);
		$.each(jsonObject.hits.hits, function(index, val) {
			var score = Math.round(val._score * 100);
			$('#searchResults').append('<div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">' + val._source.page_name + '</h3><i>' + val._type + ' - ' + score + '%</i></div><div class="panel-body"><ul class="unstyled-list" id="about"></ul></div></div></div>');
		});
/*
		$('#searchResults').append('
	      <div class="row">
	        <div class="col-sm-12">
	          <div class="panel panel-default">
	            <div class="panel-heading">
	              <h3 class="panel-title">Result</h3>
	            </div>
	            <div class="panel-body">
	              <ul class="unstyled-list" id="about"><!-- Club List --></ul>
	            </div>
	          </div>
	        </div>
		');
*/
/*
		console.log("Loaded " + $(xml).find('name').text());
		
		$('#name').html('<br />' + $(xml).find('full_name').text());
		$('#about').append('<li>Category: ' + $(xml).find('category').text() + '</li>');
		$('#about').append('<li>Date: ' + $(xml).find('date').text() + '</li>');
		
		$(xml).find('results').find('node').each(function(){
			$('#competition-results').append('<li class="list-group-item"><span class="badge">' + $(this).find('position').text() + '</span>' + $(this).find('fencer_name').text() + '</li>');
		
		
		});
*/
});
    </script>
</body>
</html>